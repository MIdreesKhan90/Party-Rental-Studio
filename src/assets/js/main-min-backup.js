document.addEventListener("DOMContentLoaded",(function(){let e=document.body,t=document.querySelector(".toggle-nav"),n="menu-active";t.addEventListener("click",(function(t){this.classList.toggle("active"),e.classList.toggle(n),document.documentElement.classList.toggle("noScroll"),document.body.classList.toggle("noScroll"),t.preventDefault()})),document.addEventListener("keyup",(function(t){27==t.keyCode&&e.classList.toggle(n)}));let o=.5*window.innerHeight,r=0;window.addEventListener("scroll",(function(){let e=window.pageYOffset;e>r?e>=o&&(document.querySelector("nav").classList.add("sticky"),document.querySelector("nav").classList.remove("animate-up")):e<=o&&(document.querySelector("nav").classList.add("animate-up"),setTimeout((function(){document.querySelector("nav").classList.contains("animate-up")&&document.querySelector("nav").classList.remove("sticky")}),300)),0==e&&document.querySelector("nav").classList.remove("animate-up"),r=e})),document.querySelector(".contact-form").addEventListener("submit",(function(e){e.preventDefault();let t=new FormData(this),n=document.getElementById("formSubmitBtn");n.textContent="Submitting..";let o={};for(let[e,n]of t.entries())o[e]=n;o.name||(o.name=`${o.firstName} ${o.lastName}`,delete o.firstName,delete o.lastName),fetch("https://phplaravel-795550-2996798.cloudwaysapps.com/api/weblead/store",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{n.textContent="Submit",e.code&&202==e.code&&function(e,t){let n=document.getElementById(e),o=document.createElement("p");o.classList.add("error"),o.textContent=t,n.parentNode.insertBefore(o,n.nextSibling),setTimeout((function(){o.remove()}),3e3)}("formSubmitBtn",e.message[0]),e.success&&1==e.success&&(window.location.href="/confirmation")})).catch((e=>{console.error("Error:",e),n.textContent="Submit"}))}));const c=window.location.search,a=new URLSearchParams(c).get("code"),s=window.location.href;if(document.querySelector('input[name="referring_page"]').value=s,a)fetch("https://app.kreetiv.com/api/prs/referred_customers/"+a).then((e=>e.json())).then((e=>{if("success"==e.status){document.querySelector('input[name="referral_id"]').value=e.cust_id,document.querySelector('input[name="source"]').value="referral";let t=document.createElement("h3");t.id="referredBy",t.textContent=`Referred By ${e.first_name} ${e.last_name}`,document.querySelector(".freetrial").insertBefore(t,document.querySelector(".freetrial").firstChild)}else{document.querySelector('input[name="referral_id"]').value=0,document.querySelector('input[name="source"]').value="website";let e=document.getElementById("referredBy");e&&e.remove()}})).catch((e=>{console.error("Error:",e)}));else{document.querySelector('input[name="referral_id"]').value=0,document.querySelector('input[name="source"]').value="website";let e=document.getElementById("referredBy");e&&e.remove()}document.getElementById("emailaddress").addEventListener("focus",(function e(){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src="https://www.google.com/recaptcha/api.js",t.appendChild(n),document.getElementById("emailaddress").removeEventListener("focus",e)}),!1)}));
